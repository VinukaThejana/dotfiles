# Reload base config if needed
source-file ~/.config/tmux/tmux.reset.conf

# Terminal settings
set-option -g default-terminal 'screen-256color'
set-option -g terminal-overrides ',xterm-256color:RGB'

# Core tmux behavior
set -g prefix `
set -g base-index 1
set -g detach-on-destroy off
set -g escape-time 0
set -g history-limit 1000000
set -g renumber-windows on
set -g set-clipboard on
set -g status-position top
set -g default-terminal "${TERM}"
setw -g mode-keys vi
set -g @logging-path "~/.tmux"

# Colors from Ghostly e-ink palette
# background = #333333
# foreground = #C2C2C2
# light gray = #A4A4A4
# mid gray   = #868686
# dark gray  = #5E5E5E
# border gray = #686868

# Pane borders
set -g pane-active-border-style 'fg=#A4A4A4,bg=default'
set -g pane-border-style 'fg=#686868,bg=default'

# Status bar
set -g status on
set -g status-position top
set -g status-justify centre
set -g status-bg "#333333"
set -g status-fg "#C2C2C2"
set -g status-left-length 40
set -g status-right-length 100

# Left: session name in lighter gray
set -g status-left "#[fg=#A4A4A4,bold]#S#[default]"
# Right: date/time in mid gray
set -g status-right "#[fg=#868686]%Y-%m-%d %H:%M"

# Window list
setw -g window-status-style "fg=#868686,bg=#333333"
setw -g window-status-current-style "fg=#C2C2C2,bold,bg=#5E5E5E"
setw -g window-status-format " #I:#W "
setw -g window-status-current-format "#[reverse] #I:#W #[default]"

# Messages & copy mode
set -g message-style "fg=#C2C2C2,bg=#5E5E5E"
set -g message-command-style "fg=#C2C2C2,bg=#868686"
setw -g mode-style "fg=#C2C2C2,bg=#5E5E5E"

# Bindings
bind-key -r B run-shell "~/.config/tmux/scripts/sessionizer.sh ~/omerxx/omerxx.com"

# Plugin settings
set -g @fzf-url-fzf-options '-p 60%,30% --prompt="ï‚Ž   " --border-label=" Open URL "'
set -g @fzf-url-history-limit '2000'

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'fcsonline/tmux-thumbs'
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'omerxx/tmux-sessionx'
set -g @plugin 'omerxx/tmux-floax'
set -g @plugin 'vaaleyard/tmux-dotbar'
set -g @floax-bind '-n M-f'

set -g @sessionx-bind 'o'
set -g @sessionx-zoxide-mode 'on'
set -g @continuum-restore 'off'
set -g @resurrect-strategy-nvim 'session'

# Dotbar (Ghostly palette)
set -g @tmux-dotbar-bg "#333333"
set -g @tmux-dotbar-fg "#868686"
set -g @tmux-dotbar-fg-current "#C2C2C2"
set -g @tmux-dotbar-fg-session "#A4A4A4"
set -g @tmux-dotbar-fg-prefix "#A4A4A4"
set -g @tmux-dotbar-right true

# Start TPM
run '~/.config/tmux/plugins/tpm/tpm'
